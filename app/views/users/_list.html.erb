<div id="search_results">
  <div style="text-align:center">
    <%= total_users %> <%=t :results %>
    <%= paginate users, :remote => true %>
  </div>
  <table>
    <thead>
    <tr>
      <th scope="col" <%= sort_td_class_helper "registered_at" %>>
        <%= sort_remote_link_helper t(:Registration_date), 'registered_at' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "username" %>>
        <%= sort_remote_link_helper t(:Username), 'username' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "given_name" %>>
        <%= sort_remote_link_helper t(:Given_name), 'given_name' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "surname" %>>
        <%= sort_remote_link_helper t(:Surname), 'surname' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "state" %>>
        <%= sort_remote_link_helper t(:State), 'state' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "city" %>>
        <%= sort_remote_link_helper t(:City), 'city' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "address" %>>
        <%= sort_remote_link_helper t(:Address), 'address' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "verified" %>>
        <%= sort_remote_link_helper t(:Verified_qm), 'verified' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <th scope="col" <%= sort_td_class_helper "active" %>>
        <%= sort_remote_link_helper t(:Active_qm), 'active' %>
        <%= image_tag("arrow_up.gif", :class =>"arrow_up", :size => "14x14") %>
        <%= image_tag("arrow_down.gif", :class =>"arrow_down", :size => "14x14") %>
      </th>
      <% if current_operator.has_role? 'users_manager' %>
          <th scope="col" colspan="2"><%=t :Operations %></th>
      <% end %>
    </tr>
    </thead>

    <tbody>
    <% users.each do |user| %>
        <tr>
          <td><%=l user.created_at %></td>
          <td><%= link_to h(user.username), user %></td>
          <td><%= user.given_name %></td>
          <td><%= user.surname %></td>
          <td><%= user.state %></td>
          <td><%= user.city %></td>
          <td><%= user.address %></td>
          <% if user.verified? %>
              <td><span class="green"><%=t :affermative %> </span></td>
          <% else %>
              <td><span class="red"><%=t :negative %> </span></td>
          <% end %>
          <% if user.active? %>
              <td><span class="green"><%=t :affermative %> </span></td>
          <% else %>
              <td><span class="red"><%=t :negative %> </span></td>
          <% end %>
          <% if current_operator.has_role? 'users_manager' %>
              <td><%= link_to t(:Edit), edit_user_path(user) %></td>
          <% end %>
          <% if current_operator.has_role? 'users_destroyer' %>
              <td><%= link_to t(:Destroy), user, :confirm => t(:Are_you_sure), :method => :delete %></td>
          <% end %>
        </tr>
    <% end %>
    </tbody>
  </table>
</div>
